import { firestore } from "firebase-admin";

// Import or define your types
// import { YourType } from '~/@types'

import { Show, Reminder, Notification } from "@/models";
import firebase from "firebase/compat";
import FirestoreDataConverter = firebase.firestore.FirestoreDataConverter;

const converter = <T>() => ({
  toFirestore: (data: Partial<T>): FirebaseFirestore.DocumentData => data,
  fromFirestore: (snap: FirebaseFirestore.QueryDocumentSnapshot): T => snap.data
});


const dataPoint = <T>(collectionPath: string) => firestore()
  .collection(collectionPath)
  .withConverter(converter<T>());

const db = {
  shows: dataPoint<Show>("shows"),
  reminders: dataPoint<Reminder>("reminders")
};

export { db };
export default db;
